<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartKids - Поиск репетиторов</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --secondary-color: #10b981;
            --secondary-dark: #0d9668;
            --accent-color: #f59e0b;
            --accent-dark: #d97706;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --bg-color: #f9fafb;
            --bg-white: #ffffff;
            --border-color: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--text-color);
            background: url('Frame 3.png') no-repeat center top;
            background-size: cover;
            background-attachment: fixed;
            line-height: 1.6;
            min-height: 100vh;
        }

        h1, h2, h3, h4, h5 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--bg-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
            cursor: pointer;
        }

        nav a:hover {
            color: var(--primary-color);
        }

        nav a.active {
            color: var(--primary-color);
        }

        nav a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
        }

        .user-menu {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-family: 'Montserrat', sans-serif;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
            font-size: 0.95rem;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary-color), #34d399);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--secondary-dark), var(--secondary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            box-shadow: var(--shadow);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent-color), #fbbf24);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, var(--accent-dark), var(--accent-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-ghost {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-ghost:hover {
            background-color: var(--bg-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        .btn-lg {
            padding: 16px 32px;
            font-size: 1.1rem;
        }

        .btn-full {
            width: 100%;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-loading {
            pointer-events: none;
            opacity: 0.8;
        }

        .btn-loading::after {
            content: '';
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        .hero {
            background: url('Frame 3.png') no-repeat center top;
            color: #3b5998;
            padding: 80px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        .search-box {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 50px;
            border: none;
            font-size: 1rem;
            box-shadow: var(--shadow-lg);
        }

        .search-box button {
            position: absolute;
            right: 5px;
            top: 5px;
            border: none;
            border-radius: 50px;
            padding: 10px 25px;
            font-weight: 600;
            cursor: pointer;
        }

        .filters {
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            padding: 30px 0;
            box-shadow: var(--shadow);
        }

        .filter-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-light);
        }

        .filter-group select {
            width: 100%;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-white);
            font-family: 'Open Sans', sans-serif;
        }

        /* Rankings Section */
        .rankings {
            padding: 60px 0;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.8rem;
        }

        .view-options {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            background: none;
            border: 1px solid var(--border-color);
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .view-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .tutors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .tutor-card {
            background-color: var(--bg-white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .tutor-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .tutor-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .tutor-rank {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            min-width: 40px;
        }

        .tutor-info {
            flex: 1;
        }

        .tutor-name {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .tutor-subjects {
            color: var(--text-light);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tutor-type {
            display: inline-block;
            padding: 3px 10px;
            background-color: #dbeafe;
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .tutor-stats {
            padding: 20px;
        }

        .stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-label {
            color: var(--text-light);
        }

        .stat-value {
            font-weight: 600;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stars {
            color: var(--accent-color);
        }

        .score {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .tutor-actions {
            padding: 0 20px 20px;
        }

        /* Page Styles */
        .page {
            display: none;
            padding: 60px 0;
            animation: fadeIn 0.5s ease-in;
            min-height: calc(100vh - 200px);
        }

        .page-active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Profile Page */
        .profile-page {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .profile-header {
            background: url('Frame 1.png') no-repeat center top;
            background-size: cover;
            background-attachment: fixed;
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 3rem;
            color: var(--primary-color);
        }

        .profile-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .profile-tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .profile-tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .profile-content {
            display: none;
        }

        .profile-content.active {
            display: block;
        }

        .profile-section {
            display: none;
        }
        
        .profile-section.active {
            display: block;
        }

        .conversations-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .conversation-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .conversation-item:hover {
            background-color: var(--bg-color);
            border-color: var(--primary-color);
        }

        .conversation-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            margin-right: 15px;
        }

        .conversation-info {
            flex: 1;
        }

        .conversation-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .conversation-preview {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .conversation-time {
            color: var(--text-light);
            font-size: 0.8rem;
        }

        .my-tutors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .my-tutor-card {
            background-color: var(--bg-white);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .my-tutor-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .my-tutor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .my-tutor-info {
            flex: 1;
        }

        .my-tutor-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .my-tutor-subjects {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .my-tutor-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .my-tutor-stat {
            text-align: center;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 6px;
        }

        .my-tutor-stat-value {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .my-tutor-stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .profile-form {
            max-width: 600px;
        }

        /* Methodology Page */
        .methodology-page {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .criteria-card {
            background-color: var(--bg-white);
            padding: 25px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .criteria-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        /* Comparison Page */
        .comparison-page {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: var(--shadow);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:nth-child(even) {
            background-color: #f8fafc;
        }

        .comparison-results {
            margin-top: 30px;
            display: none;
        }

        .comparison-results.active {
            display: block;
        }

        .comparison-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .highlight-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-color);
        }

        .highlight-card.best {
            border-left-color: var(--secondary-color);
        }

        .highlight-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 10px 0;
        }

        .highlight-card.best .highlight-value {
            color: var(--secondary-color);
        }

        .tutors-comparison {
            overflow-x: auto;
        }

        /* News Page */
        .news-page {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .news-card {
            background-color: var(--bg-white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .news-image {
            height: 180px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .news-content {
            padding: 20px;
        }

        .news-date {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        /* Contacts Page */
        .contacts-page {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .contact-info {
            background-color: var(--bg-white);
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .contact-form {
            background-color: var(--bg-white);
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: 'Open Sans', sans-serif;
        }

        /* Footer */
        footer {
            background-color: #1f2937;
            color: white;
            padding: 60px 0 30px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column a {
            color: #d1d5db;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: white;
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #374151;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        /* Back to main button */
        .back-to-main {
            margin-bottom: 30px;
        }

        /* Стили для скрытых репетиторов */
        .tutor-card.hidden {
            display: none;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: none;
        }

        .no-results.active {
            display: block;
        }

        .list-view {
            display: block;
        }

        .analytics-view {
            display: none;
        }

        /* Модальное окно регистрации/входа */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .close-modal:hover {
            color: var(--text-color);
        }

        .modal-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            border-bottom: 2px solid transparent;
        }

        .modal-tab.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }

        .modal-form {
            display: none;
        }

        .modal-form.active {
            display: block;
        }

        /* Чат с репетитором */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .chat-content {
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 800px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 70%;
            padding: 12px 15px;
            border-radius: 18px;
        }

        .message.received {
            background-color: #f1f5f9;
            align-self: flex-start;
        }

        .message.sent {
            background-color: var(--primary-color);
            color: white;
            align-self: flex-end;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
        }

        /* Уведомления */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--primary-color);
            z-index: 10000;
            max-width: 400px;
            animation: slideInRight 0.3s ease;
        }
        
        .notification-success { border-left-color: var(--secondary-color); }
        .notification-error { border-left-color: #ef4444; }
        .notification-warning { border-left-color: var(--accent-color); }
        .notification-info { border-left-color: var(--primary-color); }
        
        .notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification-close {
            background: none;
            border: none;
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            color: var(--text-light);
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        main, .page, .hero, header, footer {
            position: relative;
            z-index: 1;
        }

        /* Стили для модального окна результатов поиска */
        #searchResultsModal .modal-content {
            max-width: 800px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }

        .search-results-header {
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .search-results-count {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .search-results-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .search-result-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-result-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .search-result-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .search-result-subjects {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .search-result-school {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .search-result-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }

        .search-result-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .search-result-description {
            color: var(--text-color);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .search-result-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .no-search-results {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }

        .no-search-results i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--text-light);
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                gap: 15px;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .tutors-grid {
                grid-template-columns: 1fr;
            }

            .filter-container {
                flex-direction: column;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .btn-group {
                flex-direction: column;
            }

            .comparison-highlights {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 20px;
                padding: 25px;
            }

            .chat-content {
                height: 90vh;
                margin: 20px;
            }

            .profile-tabs {
                flex-direction: column;
            }

            .my-tutors-grid {
                grid-template-columns: 1fr;
            }

            .search-result-header {
                flex-direction: column;
                gap: 10px;
            }
            
            .search-result-actions {
                flex-direction: column;
            }
            
            .search-result-actions .btn {
                width: 100%;
            }
        }

        /* Стили для репетиторов в модальном окне школы */
        .school-tutor-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .school-tutor-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .school-tutor-info {
            flex: 1;
        }

        .school-tutor-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .school-tutor-subjects {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .school-tutor-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }

        .school-tutor-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .school-tutor-contacts {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        .contact-info {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        /* Добавьте эти стили в ваш CSS */
        .modal-content {
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        #schoolTutorsList {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Стили для скроллбара */
        #schoolTutorsList::-webkit-scrollbar {
            width: 6px;
        }

        #schoolTutorsList::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        #schoolTutorsList::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }

        #schoolTutorsList::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* Модальное окно выбора даты */
        #bookingModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            animation: fadeIn .3s ease;
        }
        #bookingModal .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: scaleIn .3s ease;
            max-width: 400px;
            text-align: center;
        }

        /* Модальное окно отзывов */
        #reviewsModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            animation: fadeIn .3s ease;
        }
        #reviewsModal .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: scaleIn .3s ease;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .review-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 10px;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .review-author {
            font-weight: 600;
            color: var(--primary-color);
        }

        .review-date {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .review-rating {
            color: var(--accent-color);
            margin-bottom: 5px;
        }

        .review-text {
            color: var(--text-color);
            line-height: 1.5;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { transform: scale(0.9); } to { transform: scale(1); } }

        /* Стили для кнопок действий репетитора */
        .tutor-actions-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" id="mainLogo">
                <img src="Frame 2.png" alt="TutorFinder Logo" style="height: 40px;">
                <span>SmartKids</span>
            </a>

            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-page="main">Репетиторы</a></li>
                    <li><a href="#" class="nav-link" data-page="methodology">Как это работает</a></li>
                    <li><a href="#" class="nav-link" data-page="comparison">Сравнение</a></li>
                    <li><a href="#" class="nav-link" data-page="news">Новости</a></li>
                    <li><a href="#" class="nav-link" data-page="contacts">Контакты</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <a href="#" class="btn btn-outline" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i>
                    Войти
                </a>
                <a href="#" class="btn btn-primary" id="registerBtn">
                    <i class="fas fa-user-plus"></i>
                    Регистрация
                </a>
            </div>
        </div>
    </header>

    <!-- Модальное окно регистрации/входа -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="modal-tabs">
                <div class="modal-tab active" data-tab="login">Вход</div>
                <div class="modal-tab" data-tab="register">Регистрация</div>
            </div>
            
            <form class="modal-form active" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Пароль</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-sign-in-alt"></i>
                    Войти
                </button>
            </form>
            
            <form class="modal-form" id="registerForm">
                <div class="form-group">
                    <label for="registerName">Имя</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerRole">Я хочу</label>
                    <select id="registerRole" required>
                        <option value="student">Найти репетитора</option>
                        <option value="tutor">Стать репетитором</option>
                    </select>
                </div>
                <div class="form-group" id="registerSchoolGroup" style="display:none;">
                    <label for="registerSchool">Школа</label>
                    <select id="registerSchool">
                        <option value="">-- Выберите школу --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Пароль</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Подтвердите пароль</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-user-plus"></i>
                    Зарегистрироваться
                </button>
            </form>
        </div>
    </div>

    <!-- Модальное окно результатов поиска -->
    <div class="modal" id="searchResultsModal">
        <div class="modal-content">
            <span class="close-modal" id="closeSearchResults">&times;</span>
            <div class="search-results-header">
                <h2>Результаты поиска</h2>
                <div class="search-results-count" id="searchResultsCount">Найдено репетиторов: 0</div>
            </div>
            <div class="search-results-list" id="searchResultsList">
                <!-- Результаты поиска будут добавлены через JavaScript -->
            </div>
        </div>
    </div>

    <!-- Чат с репетитором -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-content">
            <div class="chat-header">
                <h3 id="chatTutorName">Чат с репетитором</h3>
                <span class="close-modal" id="closeChat">&times;</span>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message received">
                    Здравствуйте! Чем могу вам помочь?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Введите сообщение...">
                <button class="btn btn-primary" id="sendMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Page -->
    <div id="main" class="page page-active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1>Найдите идеального репетитора</h1>
                <p>Тысячи проверенных репетиторов по всем предметам для школьников и студентов</p>
                <div class="search-box">
                    <input type="text" id="globalSearch" placeholder="Найдите репетитора по предмету или имени...">
                    <button class="btn btn-accent" id="searchButton">
                        <i class="fas fa-search"></i>
                        Найти
                    </button>
                </div>
                <div class="btn-group" style="margin-top: 30px; justify-content: center;">
                    <button class="btn btn-secondary btn-lg" id="becomeTutorBtn">
                        <i class="fas fa-user-tie"></i>
                        Стать репетитором
                    </button>
                    <button class="btn btn-outline btn-lg" style="color: white; border-color: white;" data-page="methodology">
                        <i class="fas fa-question-circle"></i>
                        Как это работает
                    </button>
                </div>
            </div>
        </section>

        <!-- Filters Section -->
        <section class="filters">
            <div class="container filter-container">
                <div class="filter-group">
                    <label for="subject">Предмет</label>
                    <select id="subject">
                        <option value="">Все предметы</option>
                        <option value="math">Математика</option>
                        <option value="physics">Физика</option>
                        <option value="chemistry">Химия</option>
                        <option value="russian">Русский язык</option>
                        <option value="english">Английский язык</option>
                        <option value="history">История</option>
                        <option value="biology">Биология</option>
                        <option value="programming">Программирование</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="type">Тип занятий</label>
                    <select id="type">
                        <option value="">Все типы</option>
                        <option value="online">Онлайн</option>
                        <option value="offline">Офлайн</option>
                        <option value="both">Онлайн и офлайн</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="rating">Минимальный рейтинг</label>
                    <select id="rating">
                        <option value="">Любой рейтинг</option>
                        <option value="4.5">4.5+</option>
                        <option value="4.0">4.0+</option>
                        <option value="3.5">3.5+</option>
                        <option value="3.0">3.0+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <div style="display: flex; gap: 10px; margin-top: 25px;">
                        <button class="btn btn-primary btn-sm" id="applyFilters">
                            <i class="fas fa-filter"></i>
                            Применить
                        </button>
                        <button class="btn btn-ghost btn-sm" id="resetFilters">
                            <i class="fas fa-redo"></i>
                            Сбросить
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rankings Section -->
        <section class="rankings">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Школы Якутска</h2>
                    <div class="view-options">
                        <button class="view-btn active" data-view="list">
                            <i class="fas fa-list"></i>
                            Список
                        </button>
                        <button class="view-btn" data-view="analytics">
                            <i class="fas fa-chart-pie"></i>
                            Аналитика
                        </button>
                    </div>
                </div>
                
                <!-- Вид списка -->
                <div class="list-view" id="listView">
                    <div class="no-results" id="noResults">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--text-light); margin-bottom: 20px;"></i>
                        <h3>Репетиторы не найдены</h3>
                        <p>Попробуйте изменить параметры поиска или фильтры</p>
                        <button class="btn btn-primary" id="resetSearch" style="margin-top: 15px;">
                            <i class="fas fa-redo"></i>
                            Сбросить поиск
                        </button>
                    </div>
                    
                    <div id="schoolsContainer">
                        <div class="schools-page" id="schoolsPage1" style="display:block;">
                            <div class="tutors-grid">
                                <!-- Школы 1-10 -->
                                <div class="tutor-card" data-school-id="1" onclick="openSchoolModal(1)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">1</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Республиканский лицей-интернат имени А.Е. Кулаковского</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(1)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="2" onclick="openSchoolModal(2)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">2</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Якутский городской лицей №1</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(2)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="3" onclick="openSchoolModal(3)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">3</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Физико-технический лицей имени В.П. Ларионова</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">6 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(3)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="4" onclick="openSchoolModal(4)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">4</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Городская классическая гимназия</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">3 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(4)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="5" onclick="openSchoolModal(5)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">5</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Международная арктическая школа</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(5)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="6" onclick="openSchoolModal(6)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">6</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №17</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(6)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="7" onclick="openSchoolModal(7)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">7</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №5 имени Н.О. Кривошапкина</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">3 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(7)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="8" onclick="openSchoolModal(8)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">8</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №31</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(8)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="9" onclick="openSchoolModal(9)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">9</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Национальная политехническая школа №2</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">6 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(9)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="10" onclick="openSchoolModal(10)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">10</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №26 (углубл.)</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(10)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="schools-page" id="schoolsPage2" style="display:none;">
                            <div class="tutors-grid">
                                <!-- Школы 11-20 -->
                                <div class="tutor-card" data-school-id="11" onclick="openSchoolModal(11)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">11</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №33 им. Л.А. Колосовой</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(11)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="12" onclick="openSchoolModal(12)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">12</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Якутская городская национальная гимназия имени А.Г. и Н.К. Чиряевых</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(12)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="13" onclick="openSchoolModal(13)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">13</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №1</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">3 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(13)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="14" onclick="openSchoolModal(14)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">14</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Национальная гимназия «Айыы Кыhата»</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(14)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="15" onclick="openSchoolModal(15)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">15</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Саха политехнический лицей</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">6 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(15)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="16" onclick="openSchoolModal(16)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">16</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №24 им. С.И. Климакова</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(16)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="17" onclick="openSchoolModal(17)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">17</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №21</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(17)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="18" onclick="openSchoolModal(18)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">18</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №20 им. Ф.К. Попова</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">3 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(18)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="19" onclick="openSchoolModal(19)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">19</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №6</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">5 репетиторов</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(19)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                                
                                <div class="tutor-card" data-school-id="20" onclick="openSchoolModal(20)">
                                    <div class="tutor-header">
                                        <div class="tutor-rank">20</div>
                                        <div class="tutor-info">
                                            <div class="tutor-name">Средняя общеобразовательная школа №19</div>
                                            <div class="tutor-subjects">Городская школа · Якутск</div>
                                            <div class="tutor-type">4 репетитора</div>
                                        </div>
                                    </div>
                                    <div class="tutor-actions">
                                        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();openSchoolModal(20)">Посмотреть репетиторов</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pagination" style="text-align:center;margin-top:20px;">
                            <button class="btn btn-outline" onclick="showSchoolPage(1)">1</button> 
                            <button class="btn btn-outline" onclick="showSchoolPage(2)">2</button>
                        </div>
                    </div>
                </div>

                <!-- Вид аналитики -->
                <div class="analytics-view" id="analyticsView">
                    <div style="background: white; padding: 40px; border-radius: 10px; text-align: center; box-shadow: var(--shadow);">
                        <i class="fas fa-chart-pie" style="font-size: 4rem; color: var(--primary-color); margin-bottom: 20px;"></i>
                        <h3>Аналитика репетиторов Якутска</h3>
                        <p>Раздел в разработке. Скоро здесь появятся детальные аналитические отчеты и графики.</p>
                        <button class="btn btn-primary" style="margin-top: 20px;">
                            <i class="fas fa-bell"></i>
                            Уведомить о запуске
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Profile Page -->
    <div id="profile" class="page profile-page">
        <div class="profile-header">
            <div class="container">
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <h1 id="profileUserName">Пользователь</h1>
                <p id="profileUserRole">Ученик</p>
            </div>
        </div>
        
        <div class="container">
            <div class="back-to-main">
                <button class="btn btn-ghost" data-page="main">
                    <i class="fas fa-arrow-left"></i>
                    Назад к репетиторам
                </button>
            </div>
            
            <div class="profile-tabs">
                <div class="profile-tab active" data-tab="conversations">Мои переписки</div>
                <div class="profile-tab" data-tab="myTutorsSection">Мои репетиторы</div>
                <div class="profile-tab" data-tab="settings">Настройки профиля</div>
            </div>
            
            <!-- Вкладка переписок -->
            <div class="profile-section active" id="conversations">
                <h2>Мои переписки</h2>
                <div class="conversations-list" id="conversationsList">
                    <!-- Переписки будут загружены через JavaScript -->
                </div>
            </div>
            
            <!-- Вкладка моих репетиторов -->
            <div class="profile-section" id="myTutorsSection">
                <h2>Мои репетиторы</h2>
                <div id="myTutorsList">
                    <!-- Мои репетиторы будут загружены через JavaScript -->
                </div>
            </div>
            
            <!-- Вкладка настроек -->
            <div class="profile-section" id="settings">
                <h2>Настройки профиля</h2>
                <div class="profile-form">
                    <form id="profileForm">
                        <div class="form-group">
                            <label for="profileName">Имя</label>
                            <input type="text" id="profileName" required>
                        </div>
                        <div class="form-group">
                            <label for="profileEmail">Email</label>
                            <input type="email" id="profileEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="profilePhone">Телефон</label>
                            <input type="tel" id="profilePhone">
                        </div>
                        <div class="form-group">
                            <label for="profileSchool">Школа</label>
                            <select id="profileSchool">
                                <option value="">-- Выберите школу --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="profileBio">О себе</label>
                            <textarea id="profileBio" rows="4"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Сохранить изменения
                        </button>
                    </form>
                    
                    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                        <h3>Смена пароля</h3>
                        <form id="passwordForm">
                            <div class="form-group">
                                <label for="currentPassword">Текущий пароль</label>
                                <input type="password" id="currentPassword">
                            </div>
                            <div class="form-group">
                                <label for="newPassword">Новый пароль</label>
                                <input type="password" id="newPassword">
                            </div>
                            <div class="form-group">
                                <label for="confirmNewPassword">Подтвердите новый пароль</label>
                                <input type="password" id="confirmNewPassword">
                            </div>
                            <button type="submit" class="btn btn-outline">
                                <i class="fas fa-key"></i>
                                Сменить пароль
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Methodology Page -->
    <div id="methodology" class="page methodology-page">
        <div class="container">
            <div class="back-to-main">
                <button class="btn btn-ghost" data-page="main">
                    <i class="fas fa-arrow-left"></i>
                    Назад к репетиторам
                </button>
            </div>
            
            <h1>Как работает SmartKids</h1>
            <p class="lead">Простая и эффективная система поиска и записи к репетиторам</p>
            
            <div class="criteria-grid">
                <div class="criteria-card">
                    <div class="criteria-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>Поиск репетитора</h3>
                    <p>Найдите подходящего репетитора по предмету, рейтингу, стоимости и другим параметрам</p>
                </div>
                <div class="criteria-card">
                    <div class="criteria-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <h3>Проверенные анкеты</h3>
                    <p>Все репетиторы проходят проверку и имеют подтвержденные отзывы от учеников</p>
                </div>
                <div class="criteria-card">
                    <div class="criteria-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Связь с репетитором</h3>
                    <p>Сразу после регистрации вы можете написать репетитору и обсудить детали занятий</p>
                </div>
                <div class="criteria-card">
                    <div class="criteria-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Запись на занятие</h3>
                    <p>Выберите удобное время и запишитесь на первое занятие прямо на платформе</p>
                </div>
            </div>
            
            <div style="margin-top: 50px; background: #f0f9ff; padding: 30px; border-radius: 10px;">
                <h2>Как стать репетитором на SmartKids?</h2>
                <p>Если вы опытный преподаватель и хотите присоединиться к нашей платформе:</p>
                <ol style="margin-top: 15px; margin-left: 20px;">
                    <li>Зарегистрируйтесь как репетитор</li>
                    <li>Заполните подробную анкету с информацией об образовании и опыте</li>
                    <li>Пройдите проверку модераторами</li>
                    <li>Начните получать заявки от учеников</li>
                </ol>
                <button class="btn btn-secondary" style="margin-top: 20px;" id="becomeTutorBtn2">
                    <i class="fas fa-user-tie"></i>
                    Стать репетитором
                </button>
            </div>
        </div>
    </div>

    <!-- Comparison Page -->
    <div id="comparison" class="page comparison-page">
        <div class="container">
            <div class="back-to-main">
                <button class="btn btn-ghost" data-page="main">
                    <i class="fas fa-arrow-left"></i>
                    Назад к репетиторам
                </button>
            </div>
            
            <h1>Сравнение репетиторов</h1>
            <p>Выберите до 3 репетиторов для сравнения их характеристик</p>
            
            <div class="comparison-controls" style="margin-top: 30px;">
                <div class="filter-container">
                    <div class="filter-group">
                        <label for="compareTutor1">Репетитор 1</label>
                        <select id="compareTutor1">
                            <option value="">Выберите репетитора</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="compareTutor2">Репетитор 2</label>
                        <select id="compareTutor2">
                            <option value="">Выберите репетитора</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="compareTutor3">Репетитор 3</label>
                        <select id="compareTutor3">
                            <option value="">Выберите репетитора</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary" id="compareButton" style="margin-top: 20px;">
                    <i class="fas fa-balance-scale"></i>
                    Сравнить
                </button>
            </div>
            
            <div class="comparison-results" id="comparisonResults">
                <div class="comparison-highlights" id="comparisonHighlights">
                    <!-- Блоки с лучшими показателями будут добавлены через JavaScript -->
                </div>
                
                <div class="tutors-comparison">
                    <table class="comparison-table" id="comparisonTable">
                        <thead>
                            <tr>
                                <th>Параметр</th>
                                <!-- Заголовки с именами репетиторов будут добавлены через JavaScript -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные для сравнения будут добавлены через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- News Page -->
    <div id="news" class="page news-page">
        <div class="container">
            <div class="back-to-main">
                <button class="btn btn-ghost" data-page="main">
                    <i class="fas fa-arrow-left"></i>
                    Назад к репетиторам
                </button>
            </div>
            
            <h1>Новости и статьи</h1>
            <p>Полезные материалы о репетиторстве и образовании</p>
            
            <div class="news-grid">
                <div class="news-card">
                    <div class="news-image">
                        <i class="fas fa-graduation-cap" style="font-size: 4rem;"></i>
                    </div>
                    <div class="news-content">
                        <div class="news-date">15 мая 2023</div>
                        <h3>Как выбрать репетитора для ребенка</h3>
                        <p>Рекомендации по выбору подходящего репетитора в зависимости от возраста, предмета и целей обучения</p>
                        <a href="#" class="btn btn-ghost btn-sm" style="margin-top: 15px;">Читать далее</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-image">
                        <i class="fas fa-laptop" style="font-size: 4rem;"></i>
                    </div>
                    <div class="news-content">
                        <div class="news-date">10 мая 2023</div>
                        <h3>Онлайн vs офлайн: что эффективнее?</h3>
                        <p>Сравнение эффективности онлайн и офлайн занятий с репетитором на основе исследований</p>
                        <a href="#" class="btn btn-ghost btn-sm" style="margin-top: 15px;">Читать далее</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-image">
                        <i class="fas fa-book" style="font-size: 4rem;"></i>
                    </div>
                    <div class="news-content">
                        <div class="news-date">5 мая 2023</div>
                        <h3>Подготовка к ЕГЭ: когда начинать?</h3>
                        <p>Оптимальные сроки начала подготовки к ЕГЭ по разным предметам и советы репетиторов</p>
                        <a href="#" class="btn btn-ghost btn-sm" style="margin-top: 15px;">Читать далее</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contacts Page -->
    <div id="contacts" class="page contacts-page">
        <div class="container">
            <div class="back-to-main">
                <button class="btn btn-ghost" data-page="main">
                    <i class="fas fa-arrow-left"></i>
                    Назад к репетиторам
                </button>
            </div>
            
            <h1>Контакты</h1>
            <p>Свяжитесь с нами, если у вас есть вопросы или предложения</p>
            
            <div class="contact-grid">
                <div class="contact-info">
                    <h3>Контактная информация</h3>
                    <div style="margin-top: 25px;">
                        <p><i class="fas fa-map-marker-alt" style="color: var(--primary-color); margin-right: 10px;"></i> г. Якутск, ул. Ленина, 1</p>
                        <p><i class="fas fa-phone" style="color: var(--primary-color); margin-right: 10px;"></i> +7 (4112) 123-456</p>
                        <p><i class="fas fa-envelope" style="color: var(--primary-color); margin-right: 10px;"></i> info@tutorfinder.ru</p>
                    </div>
                    
                    <h3 style="margin-top: 30px;">Мы в соцсетях</h3>
                    <div class="btn-group" style="margin-top: 15px;">
                        <a href="#" class="btn btn-icon" style="background-color: #3b5998; color: white;">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="btn btn-icon" style="background-color: #1da1f2; color: white;">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="btn btn-icon" style="background-color: #e4405f; color: white;">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="btn btn-icon" style="background-color: #0088cc; color: white;">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Обратная связь</h3>
                    <form id="feedbackForm">
                        <div class="form-group">
                            <label for="name">Ваше имя</label>
                            <input type="text" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Сообщение</label>
                            <textarea id="message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Отправить
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h3>SmartKids</h3>
                    <ul>
                        <li><a href="#" data-page="methodology">О нас</a></li>
                        <li><a href="#" data-page="news">Новости</a></li>
                        <li><a href="#" data-page="contacts">Контакты</a></li>
                        <li><a href="#">Вакансии</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Репетиторам</h3>
                    <ul>
                        <li><a href="#">Стать репетитором</a></li>
                        <li><a href="#">Правила платформы</a></li>
                        <li><a href="#">Помощь репетиторам</a></li>
                        <li><a href="#">Вебинары для репетиторов</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Ученикам</h3>
                    <ul>
                        <li><a href="#" data-page="methodology">Как это работает</a></li>
                        <li><a href="#">Частые вопросы</a></li>
                        <li><a href="#">Отзывы</a></li>
                        <li><a href="#">Блог</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Популярные предметы</h3>
                    <ul>
                        <li><a href="#">Математика</a></li>
                        <li><a href="#">Русский язык</a></li>
                        <li><a href="#">Английский язык</a></li>
                        <li><a href="#">Физика</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2025 SmartKids. Все права защищены.
            </div>
        </div>
    </footer>

    <!-- Модальное окно школы -->
    <div class="modal" id="schoolModal">
        <div class="modal-content" style="max-width:800px; max-height:90vh; display:flex; flex-direction:column;">
            <span class="close-modal" id="closeSchoolModal">&times;</span>
            <h2 id="schoolModalTitle">Школа</h2>
            <p style="color:var(--text-light); margin-bottom:15px;">Зарегистрированные дети, желающие стать репетиторами</p>
            <div id="schoolTutorsList" style="flex:1; overflow-y:auto; padding-right:10px;">
                <!-- Контент будет добавлен через JavaScript -->
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора даты -->
    <div class="modal" id="bookingModal">
        <div class="modal-content" style="max-width:400px;text-align:center;">
            <span class="close-modal" id="closeBooking">&times;</span>
            <h3>Выберите дату занятия</h3>
            <input type="date" id="lessonDate" 
                   style="width:100%;padding:10px;margin:20px 0;
                          border:1px solid #ccc;border-radius:8px;">
            <button class="btn btn-primary btn-full" id="confirmBooking">
                <i class="fas fa-check"></i> Подтвердить запись
            </button>
        </div>
    </div>

    <!-- Модальное окно отзывов -->
    <div class="modal" id="reviewsModal">
        <div class="modal-content">
            <span class="close-modal" id="closeReviews">&times;</span>
            <h2 id="reviewsModalTitle">Отзывы о репетиторе</h2>
            <div id="reviewsList">
                <!-- Отзывы будут загружены через JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Расширенные данные репетиторов с информацией о школах
        const tutors = [
            {
                id: 1,
                name: "Иванова Анна Сергеевна",
                subjects: ["Математика", "Физика"],
                type: "online",
                rating: 4.9,
                reviews: 127,
                students: 89,
                experience: 8,
                price: 1200,
                description: "Опытный репетитор по математике и физике. Подготовка к ЕГЭ и ОГЭ.",
                education: "МГУ, физический факультет",
                specialization: "Высшая математика, механика",
                schoolId: 1,
                schoolName: "Республиканский лицей-интернат имени А.Е. Кулаковского"
            },
            {
                id: 2,
                name: "Петров Дмитрий Игоревич",
                subjects: ["Программирование", "Информатика"],
                type: "both",
                rating: 4.8,
                reviews: 94,
                students: 67,
                experience: 6,
                price: 1500,
                description: "Преподаватель программирования с опытом работы в IT-компаниях.",
                education: "СПбГУ, факультет прикладной математики",
                specialization: "Python, алгоритмы, веб-разработка",
                schoolId: 2,
                schoolName: "Якутский городской лицей №1"
            },
            {
                id: 3,
                name: "Сидорова Елена Владимировна",
                subjects: ["Английский язык"],
                type: "offline",
                rating: 4.7,
                reviews: 156,
                students: 112,
                experience: 10,
                price: 1000,
                description: "Репетитор английского языка с международными сертификатами.",
                education: "МГЛУ, факультет английской филологии",
                specialization: "Разговорный английский, подготовка к IELTS",
                schoolId: 3,
                schoolName: "Физико-технический лицей имени В.П. Ларионова"
            },
            {
                id: 4,
                name: "Кузнецов Алексей Петрович",
                subjects: ["Химия", "Биология"],
                type: "online",
                rating: 4.9,
                reviews: 82,
                students: 58,
                experience: 7,
                price: 1300,
                description: "Специалист по подготовке к олимпиадам по химии и биологии.",
                education: "РХТУ, факультет химической технологии",
                specialization: "Органическая химия, биохимия",
                schoolId: 4,
                schoolName: "Городская классическая гимназия"
            },
            {
                id: 5,
                name: "Николаева Мария Александровна",
                subjects: ["Русский язык", "Литература"],
                type: "both",
                rating: 4.6,
                reviews: 113,
                students: 76,
                experience: 9,
                price: 1100,
                description: "Эксперт ЕГЭ по русскому языку и литературе.",
                education: "МПГУ, филологический факультет",
                specialization: "Подготовка к сочинению, анализ текста",
                schoolId: 5,
                schoolName: "Международная арктическая школа"
            },
            {
                id: 6,
                name: "Васильев Игорь Олегович",
                subjects: ["История", "Обществознание"],
                type: "online",
                rating: 4.5,
                reviews: 78,
                students: 45,
                experience: 5,
                price: 900,
                description: "Преподаватель истории и обществознания, кандидат исторических наук.",
                education: "МГУ, исторический факультет",
                specialization: "Подготовка к ЕГЭ, олимпиадам по истории",
                schoolId: 6,
                schoolName: "Средняя общеобразовательная школа №17"
            }
        ];

        // Данные для профиля
        let userConversations = JSON.parse(localStorage.getItem('userConversations')) || [];
        let userTutors = JSON.parse(localStorage.getItem('userTutors')) || [];
        let userProfile = JSON.parse(localStorage.getItem('userProfile')) || {};

        // Переменная для хранения выбранного репетитора
        let selectedTutor = null;

        // Функции для работы с пользователями
        function registerUser(name, email, password, role) {
            const users = JSON.parse(localStorage.getItem('tutorFinderUsers')) || [];
            
            // Проверка на существующего пользователя
            if (users.find(user => user.email === email)) {
                return { success: false, message: 'Пользователь с таким email уже существует' };
            }
            
            // Создание нового пользователя
            const newUser = {
                id: Date.now(),
                name,
                email,
                password, // В реальном приложении нужно хэшировать пароль!
                role: role || 'student',
                createdAt: new Date().toISOString(),
                phone: '',
                bio: ''
            };
            
            users.push(newUser);
            localStorage.setItem('tutorFinderUsers', JSON.stringify(users));
            localStorage.setItem('tutorFinderCurrentUser', JSON.stringify(newUser));
            
            // Сохраняем профиль
            userProfile = { name, email, phone: '', bio: '', role };
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
            
            return { success: true, user: newUser };
        }

        function loginUser(email, password) {
            const users = JSON.parse(localStorage.getItem('tutorFinderUsers')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                localStorage.setItem('tutorFinderCurrentUser', JSON.stringify(user));
                
                // Загружаем профиль
                const savedProfile = JSON.parse(localStorage.getItem('userProfile'));
                if (savedProfile) {
                    userProfile = savedProfile;
                } else {
                    userProfile = { 
                        name: user.name, 
                        email: user.email, 
                        phone: '', 
                        bio: '', 
                        role: user.role 
                    };
                    localStorage.setItem('userProfile', JSON.stringify(userProfile));
                }
                
                // Загружаем переписки и репетиторов
                userConversations = JSON.parse(localStorage.getItem('userConversations')) || [];
                userTutors = JSON.parse(localStorage.getItem('userTutors')) || [];
                
                return { success: true, user };
            }
            
            return { success: false, message: 'Неверный email или пароль' };
        }

        function getCurrentUser() {
            return JSON.parse(localStorage.getItem('tutorFinderCurrentUser'));
        }

        function logoutUser() {
            localStorage.removeItem('tutorFinderCurrentUser');
        }

        // Система уведомлений
        function showNotification(message, type = 'info') {
            // Создаем элемент уведомления
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${getNotificationIcon(type)}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            document.body.appendChild(notification);
            
            // Автоматическое закрытие через 5 секунд
            const autoClose = setTimeout(() => {
                closeNotification(notification);
            }, 5000);
            
            // Закрытие по клику
            notification.querySelector('.notification-close').addEventListener('click', () => {
                clearTimeout(autoClose);
                closeNotification(notification);
            });
        }

        function getNotificationIcon(type) {
            const icons = {
                'success': 'check-circle',
                'error': 'exclamation-circle',
                'warning': 'exclamation-triangle',
                'info': 'info-circle'
            };
            return icons[type] || 'info-circle';
        }

        function closeNotification(notification) {
            notification.style.animation = 'slideInRight 0.3s ease reverse';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }

        // Валидация форм
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePassword(password) {
            return password.length >= 6;
        }

        // Обновление интерфейса при авторизации
        function updateAuthUI() {
            const currentUser = getCurrentUser();
            const authButtons = document.querySelector('.auth-buttons');
            
            if (currentUser) {
                authButtons.innerHTML = `
                    <div class="user-menu">
                        <button class="btn btn-ghost" id="userProfileBtn">
                            <i class="fas fa-user"></i>
                            ${currentUser.name}
                        </button>
                        <button class="btn btn-outline" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            Выйти
                        </button>
                    </div>
                `;
                
                document.getElementById('logoutBtn').addEventListener('click', function() {
                    logoutUser();
                    updateAuthUI();
                    showNotification('Вы вышли из системы', 'info');
                });
                
                document.getElementById('userProfileBtn').addEventListener('click', function() {
                    switchPage('profile');
                });
            } else {
                authButtons.innerHTML = `
                    <a href="#" class="btn btn-outline" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        Войти
                    </a>
                    <a href="#" class="btn btn-primary" id="registerBtn">
                        <i class="fas fa-user-plus"></i>
                        Регистрация
                    </a>
                `;
                
                // Переинициализация обработчиков для новых кнопок
                document.getElementById('loginBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('authModal').style.display = 'flex';
                });
                
                document.getElementById('registerBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('authModal').style.display = 'flex';
                    switchTab('register');
                });
            }
        }

        // Переключение между страницами
        function switchPage(pageId) {
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            
            pages.forEach(page => {
                page.classList.remove('page-active');
            });
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('page-active');
                
                // Обновляем навигацию
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-page') === pageId) {
                        link.classList.add('active');
                    }
                });
                
                // Если переходим на профиль, обновляем данные
                if (pageId === 'profile') {
                    updateProfilePage();
                }
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Обновление страницы профиля
        function updateProfilePage() {
            const currentUser = getCurrentUser();
            if (!currentUser) return;
            
            // Обновляем заголовок профиля
            document.getElementById('profileUserName').textContent = userProfile.name || currentUser.name;
            document.getElementById('profileUserRole').textContent = userProfile.role === 'tutor' ? 'Репетитор' : 'Ученик';
            
            // Заполняем форму профиля
            document.getElementById('profileName').value = userProfile.name || currentUser.name;
            document.getElementById('profileEmail').value = userProfile.email || currentUser.email;
            document.getElementById('profilePhone').value = userProfile.phone || '';
            document.getElementById('profileBio').value = userProfile.bio || '';
            
            // Обновляем переписки
            updateConversationsList();
            
            // Обновляем список репетиторов
            updateMyTutorsList();
        }

        // Обновление списка переписок
        function updateConversationsList() {
            const conversationsList = document.getElementById('conversationsList');
            conversationsList.innerHTML = '';
            
            // Загружаем актуальные данные из localStorage
            userConversations = JSON.parse(localStorage.getItem('userConversations')) || [];
            
            if (userConversations.length === 0) {
                conversationsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <p>У вас пока нет переписок с репетиторами</p>
                        <button class="btn btn-primary" style="margin-top: 15px;" data-page="main">
                            <i class="fas fa-search"></i>
                            Найти репетитора
                        </button>
                    </div>
                `;
                
                // Добавляем обработчик для кнопки
                conversationsList.querySelector('button').addEventListener('click', function() {
                    switchPage('main');
                });
                
                return;
            }
            
            userConversations.forEach(conversation => {
                const tutor = tutors.find(t => t.id === conversation.tutorId);
                if (!tutor) return;
                
                const lastMessage = conversation.messages[conversation.messages.length - 1];
                const conversationItem = document.createElement('div');
                conversationItem.className = 'conversation-item';
                conversationItem.innerHTML = `
                    <div class="conversation-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="conversation-info">
                        <div class="conversation-name">${tutor.name}</div>
                        <div class="conversation-preview">${lastMessage.text}</div>
                    </div>
                    <div class="conversation-time">${formatTime(lastMessage.timestamp)}</div>
                `;
                
                conversationItem.addEventListener('click', function() {
                    openChat(conversation.tutorId);
                });
                
                conversationsList.appendChild(conversationItem);
            });
        }

        // Обновление списка моих репетиторов
        function updateMyTutorsList() {
            const myTutorsGrid = document.getElementById('myTutorsList');
            if (!myTutorsGrid) return;
            
            myTutorsGrid.innerHTML = '';
            
            // Загружаем данные из ОБОИХ источников
            const userTutors = JSON.parse(localStorage.getItem('userTutors')) || [];
            const myTutorsBookings = JSON.parse(localStorage.getItem('myTutors')) || [];
            
            if (userTutors.length === 0 && myTutorsBookings.length === 0) {
                myTutorsGrid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-user-tie" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <p>У вас пока нет репетиторов</p>
                        <button class="btn btn-primary" style="margin-top: 15px;" data-page="main">
                            <i class="fas fa-search"></i>
                            Найти репетитора
                        </button>
                    </div>
                `;
                
                myTutorsGrid.querySelector('button').addEventListener('click', function() {
                    switchPage('main');
                });
                
                return;
            }
            
            // Показываем репетиторов из новой системы (с датами)
            myTutorsBookings.forEach((booking, index) => {
                const tutorCard = document.createElement('div');
                tutorCard.className = 'my-tutor-card';
                tutorCard.innerHTML = `
                    <div class="my-tutor-header">
                        <div class="my-tutor-avatar">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="my-tutor-info">
                            <div class="my-tutor-name">${booking.name}</div>
                            <div class="my-tutor-subjects">Дата занятия: <strong>${booking.date}</strong></div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-primary btn-sm contact-tutor" data-id="${booking.id}">
                            <i class="fas fa-comments"></i>
                            Написать
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="removeTutor(${index})">
                            <i class="fas fa-trash"></i>
                            Удалить запись
                        </button>
                    </div>
                `;
                
                myTutorsGrid.appendChild(tutorCard);
            });
            
            // Добавляем обработчики для кнопок
            document.querySelectorAll('.contact-tutor').forEach(button => {
                button.addEventListener('click', function() {
                    const tutorId = this.getAttribute('data-id');
                    openChat(tutorId);
                });
            });
        }

        // Форматирование времени
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60 * 1000) {
                return 'только что';
            } else if (diff < 60 * 60 * 1000) {
                return `${Math.floor(diff / (60 * 1000))} мин назад`;
            } else if (diff < 24 * 60 * 60 * 1000) {
                return `${Math.floor(diff / (60 * 60 * 1000))} ч назад`;
            } else {
                return date.toLocaleDateString();
            }
        }

        // Генерация звезд рейтинга
        function generateStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (halfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // Получение текста для типа занятий
        function getTypeText(type) {
            switch(type) {
                case 'online': return 'Онлайн';
                case 'offline': return 'Офлайн';
                case 'both': return 'Онлайн и офлайн';
                default: return '';
            }
        }

        // Отображение репетиторов
        function displayTutors(tutorsToDisplay) {
            const tutorsGrid = document.getElementById('tutorsGrid');
            const noResults = document.getElementById('noResults');
            
            if (!tutorsGrid) return;
            
            if (tutorsToDisplay.length === 0) {
                tutorsGrid.innerHTML = '';
                noResults.classList.add('active');
                return;
            }
            
            noResults.classList.remove('active');
            
            tutorsGrid.innerHTML = '';
            
            tutorsToDisplay.forEach((tutor, index) => {
                const tutorCard = document.createElement('div');
                tutorCard.className = 'tutor-card';
                tutorCard.setAttribute('data-id', tutor.id);
                
                // Формируем список предметов
                const subjectsList = tutor.subjects.join(', ');
                
                // Формируем звезды рейтинга
                const stars = generateStars(tutor.rating);
                
                tutorCard.innerHTML = `
                    <div class="tutor-header">
                        <div class="tutor-rank">${index + 1}</div>
                        <div class="tutor-info">
                            <h3 class="tutor-name">${tutor.name}</h3>
                            <div class="tutor-subjects">
                                <i class="fas fa-book"></i>
                                ${subjectsList}
                            </div>
                            <span class="tutor-type">${getTypeText(tutor.type)}</span>
                        </div>
                    </div>
                    <div class="tutor-stats">
                        <div class="stat">
                            <span class="stat-label">Рейтинг</span>
                            <div class="stat-value rating">
                                <span class="stars">${stars}</span>
                                <span class="score">${tutor.rating}</span>
                            </div>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Отзывы</span>
                            <span class="stat-value">${tutor.reviews}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Ученики</span>
                            <span class="stat-value">${tutor.students}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Опыт</span>
                            <span class="stat-value">${tutor.experience} лет</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Стоимость</span>
                            <span class="stat-value">${tutor.price} руб/час</span>
                        </div>
                    </div>
                    <div class="tutor-actions">
                        <div class="btn-group">
                            <button class="btn btn-primary btn-sm btn-full contact-tutor" data-id="${tutor.id}">
                                <i class="fas fa-comments"></i>
                                Связаться
                            </button>
                        </div>
                    </div>
                `;
                
                tutorsGrid.appendChild(tutorCard);
            });
            
            // Добавляем обработчики для кнопок связи
            document.querySelectorAll('.contact-tutor').forEach(button => {
                button.addEventListener('click', function() {
                    const tutorId = this.getAttribute('data-id');
                    openChat(tutorId);
                });
            });
        }

        // Функция поиска репетиторов
        function searchTutors() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase().trim();
            const subjectFilter = document.getElementById('subject').value;
            const typeFilter = document.getElementById('type').value;
            const ratingFilter = document.getElementById('rating').value;

            let filteredTutors = [...tutors];

            // Применяем текстовый поиск
            if (searchTerm) {
                filteredTutors = filteredTutors.filter(tutor => {
                    return tutor.name.toLowerCase().includes(searchTerm) || 
                           tutor.subjects.some(subject => subject.toLowerCase().includes(searchTerm)) ||
                           tutor.description.toLowerCase().includes(searchTerm) ||
                           (tutor.schoolName && tutor.schoolName.toLowerCase().includes(searchTerm));
                });
            }

            // Применяем фильтры
            if (subjectFilter) {
                filteredTutors = filteredTutors.filter(tutor => 
                    tutor.subjects.some(subject => 
                        getSubjectValue(subject) === subjectFilter
                    )
                );
            }

            if (typeFilter) {
                filteredTutors = filteredTutors.filter(tutor => tutor.type === typeFilter);
            }

            if (ratingFilter) {
                filteredTutors = filteredTutors.filter(tutor => tutor.rating >= parseFloat(ratingFilter));
            }

            // Показываем результаты в модальном окне
            displaySearchResults(filteredTutors, searchTerm);
        }

        // Отображение результатов поиска в модальном окне
        function displaySearchResults(results, searchTerm) {
            const resultsContainer = document.getElementById('searchResultsList');
            const resultsCount = document.getElementById('searchResultsCount');
            
            resultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="no-search-results">
                        <i class="fas fa-search"></i>
                        <h3>Ничего не найдено</h3>
                        <p>Попробуйте изменить параметры поиска или использовать другие ключевые слова</p>
                        <button class="btn btn-primary" onclick="resetSearchAndClose()" style="margin-top: 15px;">
                            <i class="fas fa-redo"></i>
                            Сбросить фильтры
                        </button>
                    </div>
                `;
                resultsCount.textContent = `Найдено репетиторов: 0`;
            } else {
                resultsCount.textContent = `Найдено репетиторов: ${results.length}`;
                
                results.forEach(tutor => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    
                    const stars = generateStars(tutor.rating);
                    const subjectsList = tutor.subjects.join(', ');
                    
                    resultItem.innerHTML = `
                        <div class="search-result-header">
                            <div class="search-result-info">
                                <div class="search-result-name">${tutor.name}</div>
                                <div class="search-result-subjects">
                                    <i class="fas fa-book"></i>
                                    ${subjectsList}
                                </div>
                                ${tutor.schoolName ? `<div class="search-result-school">
                                    <i class="fas fa-school"></i>
                                    ${tutor.schoolName}
                                </div>` : ''}
                                <div class="search-result-stats">
                                    <div class="search-result-stat">
                                        <i class="fas fa-star" style="color: var(--accent-color);"></i>
                                        ${tutor.rating} (${stars})
                                    </div>
                                    <div class="search-result-stat">
                                        <i class="fas fa-clock"></i>
                                        ${tutor.experience} лет опыта
                                    </div>
                                    <div class="search-result-stat">
                                        <i class="fas fa-wallet"></i>
                                        ${tutor.price} руб/час
                                    </div>
                                    <div class="search-result-stat">
                                        <i class="fas fa-${tutor.type === 'online' ? 'laptop' : tutor.type === 'offline' ? 'map-marker-alt' : 'globe'}"></i>
                                        ${getTypeText(tutor.type)}
                                    </div>
                                </div>
                                <div class="search-result-description">
                                    ${tutor.description}
                                </div>
                            </div>
                        </div>
                        <div class="search-result-actions">
                            <button class="btn btn-primary btn-sm" onclick="openChat(${tutor.id})">
                                <i class="fas fa-comments"></i>
                                Связаться
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="showTutorDetails(${tutor.id})">
                                <i class="fas fa-info-circle"></i>
                                Подробнее
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="applyToTutor(${tutor.id}, '${tutor.name}')">
                                <i class="fas fa-calendar-check"></i>
                                Записаться
                            </button>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(resultItem);
                });
            }
            
            // Показываем модальное окно
            document.getElementById('searchResultsModal').style.display = 'flex';
        }

        // Функция для показа детальной информации о репетиторе
        function showTutorDetails(tutorId) {
            const tutor = tutors.find(t => t.id === tutorId);
            if (!tutor) return;
            
            // Закрываем модальное окно поиска
            document.getElementById('searchResultsModal').style.display = 'none';
            
            // Показываем уведомление с информацией о репетиторе
            const message = `
                <strong>${tutor.name}</strong><br>
                <em>${tutor.subjects.join(', ')}</em><br><br>
                ${tutor.description}<br><br>
                <strong>Образование:</strong> ${tutor.education}<br>
                <strong>Специализация:</strong> ${tutor.specialization}<br>
                <strong>Опыт:</strong> ${tutor.experience} лет<br>
                <strong>Рейтинг:</strong> ${tutor.rating}/5<br>
                <strong>Стоимость:</strong> ${tutor.price} руб/час
            `;
            
            // Создаем кастомное модальное окно с детальной информацией
            const detailModal = document.createElement('div');
            detailModal.className = 'modal';
            detailModal.style.display = 'flex';
            detailModal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <span class="close-modal" onclick="this.parentElement.parentElement.style.display='none'">&times;</span>
                    <h2>Информация о репетиторе</h2>
                    <div style="margin-top: 20px; line-height: 1.6;">
                        ${message}
                    </div>
                    <div class="btn-group" style="margin-top: 25px; justify-content: center;">
                        <button class="btn btn-primary" onclick="openChat(${tutor.id}); this.parentElement.parentElement.parentElement.style.display='none'">
                            <i class="fas fa-comments"></i>
                            Связаться
                        </button>
                        <button class="btn btn-secondary" onclick="applyToTutor(${tutor.id}, '${tutor.name}'); this.parentElement.parentElement.parentElement.style.display='none'">
                            <i class="fas fa-calendar-check"></i>
                            Записаться
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(detailModal);
            
            // Закрытие при клике вне модального окна
            detailModal.addEventListener('click', function(e) {
                if (e.target === detailModal) {
                    detailModal.style.display = 'none';
                }
            });
        }

        // Сброс поиска и закрытие модального окна
        function resetSearchAndClose() {
            resetFilters();
            document.getElementById('searchResultsModal').style.display = 'none';
        }

        // Получение значения предмета для фильтра
        function getSubjectValue(subject) {
            const subjectMap = {
                'Математика': 'math',
                'Физика': 'physics',
                'Химия': 'chemistry',
                'Русский язык': 'russian',
                'Английский язык': 'english',
                'История': 'history',
                'Биология': 'biology',
                'Программирование': 'programming'
            };
            
            return subjectMap[subject] || '';
        }

        // Применение фильтров
        function applyFilters() {
            searchTutors();
        }

        // Сброс фильтров
        function resetFilters() {
            document.getElementById('subject').value = '';
            document.getElementById('type').value = '';
            document.getElementById('rating').value = '';
            document.getElementById('globalSearch').value = '';
        }

        // Сброс поиска
        function resetSearch() {
            resetFilters();
        }

        // Сравнение репетиторов
        function compareTutors() {
            const selectedTutorIds = [];
            
            // Получаем выбранных репетиторов
            const tutorSelects = [
                document.getElementById('compareTutor1'),
                document.getElementById('compareTutor2'),
                document.getElementById('compareTutor3')
            ];
            
            tutorSelects.forEach(select => {
                if (select.value) {
                    selectedTutorIds.push(parseInt(select.value));
                }
            });
            
            if (selectedTutorIds.length < 2) {
                showNotification('Выберите как минимум двух репетиторов для сравнения', 'warning');
                return;
            }
            
            // Получаем данные выбранных репетиторов
            const selectedTutors = tutors.filter(tutor => selectedTutorIds.includes(tutor.id));
            
            // Показываем результаты сравнения
            displayComparisonResults(selectedTutors);
        }

        // Отображение результатов сравнения
        function displayComparisonResults(selectedTutors) {
            const resultsContainer = document.getElementById('comparisonResults');
            const highlightsContainer = document.getElementById('comparisonHighlights');
            const table = document.getElementById('comparisonTable');
            
            // Показываем контейнер с результатами
            resultsContainer.classList.add('active');
            
            // Очищаем предыдущие результаты
            highlightsContainer.innerHTML = '';
            table.innerHTML = '';
            
            // Создаем заголовок таблицы
            let headerRow = '<tr><th>Параметр</th>';
            selectedTutors.forEach(tutor => {
                headerRow += `<th>${tutor.name}</th>`;
            });
            headerRow += '</tr>';
            table.innerHTML = headerRow;
            
            // Добавляем строки сравнения
            const comparisonData = [
                { label: 'Рейтинг', key: 'rating', format: value => value.toFixed(1) },
                { label: 'Отзывы', key: 'reviews', format: value => value },
                { label: 'Ученики', key: 'students', format: value => value },
                { label: 'Опыт (лет)', key: 'experience', format: value => value },
                { label: 'Стоимость (руб/час)', key: 'price', format: value => value },
                { label: 'Предметы', key: 'subjects', format: value => value.join(', ') },
                { label: 'Тип занятий', key: 'type', format: value => getTypeText(value) }
            ];
            
            comparisonData.forEach(data => {
                let row = `<tr><td>${data.label}</td>`;
                
                selectedTutors.forEach(tutor => {
                    const value = tutor[data.key];
                    row += `<td>${data.format(value)}</td>`;
                });
                
                row += '</tr>';
                table.innerHTML += row;
            });
            
            // Добавляем блоки с лучшими показателями
            const bestRatingTutor = [...selectedTutors].sort((a, b) => b.rating - a.rating)[0];
            const bestPriceTutor = [...selectedTutors].sort((a, b) => a.price - b.price)[0];
            const mostExperiencedTutor = [...selectedTutors].sort((a, b) => b.experience - a.experience)[0];
            
            highlightsContainer.innerHTML = `
                <div class="highlight-card best">
                    <i class="fas fa-star" style="font-size: 2rem; color: var(--accent-color);"></i>
                    <h4>Лучший рейтинг</h4>
                    <div class="highlight-value">${bestRatingTutor.rating.toFixed(1)}</div>
                    <p>${bestRatingTutor.name}</p>
                </div>
                <div class="highlight-card best">
                    <i class="fas fa-wallet" style="font-size: 2rem; color: var(--secondary-color);"></i>
                    <h4>Лучшая цена</h4>
                    <div class="highlight-value">${bestPriceTutor.price} руб</div>
                    <p>${bestPriceTutor.name}</p>
                </div>
                <div class="highlight-card best">
                    <i class="fas fa-award" style="font-size: 2rem; color: var(--primary-color);"></i>
                    <h4>Больше всего опыта</h4>
                    <div class="highlight-value">${mostExperiencedTutor.experience} лет</div>
                    <p>${mostExperiencedTutor.name}</p>
                </div>
            `;
        }

        // Переключение между вкладками в модальном окне
        function switchTab(tabName) {
            const modalTabs = document.querySelectorAll('.modal-tab');
            const modalForms = document.querySelectorAll('.modal-form');
            
            modalTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            modalForms.forEach(form => {
                form.classList.remove('active');
                if (form.id === `${tabName}Form`) {
                    form.classList.add('active');
                }
            });
        }

        // Переключение между вкладками профиля
        function switchProfileTab(tabName) {
            const profileTabs = document.querySelectorAll('.profile-tab');
            const profileSections = document.querySelectorAll('.profile-section');
            
            profileTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            profileSections.forEach(section => {
                section.classList.remove('active');
                if (section.id === tabName) {
                    section.classList.add('active');
                }
            });
            
            // Если переключаемся на вкладку "Мои репетиторы", обновляем список
            if (tabName === 'myTutorsSection') {
                updateMyTutorsList();
            }
        }

        // Открытие чата с репетитором
        function openChat(tutorId) {
            const currentUser = getCurrentUser();
            if (!currentUser) {
                showNotification('Для связи с репетитором необходимо войти в систему', 'warning');
                document.getElementById('authModal').style.display = 'flex';
                return;
            }
            
            const tutor = tutors.find(t => t.id == tutorId);
            if (!tutor) return;
            
            // Добавляем репетитора в список моих репетиторов, если его там нет
            if (!userTutors.includes(tutorId)) {
                userTutors.push(tutorId);
                localStorage.setItem('userTutors', JSON.stringify(userTutors));
            }
            
            // Создаем или находим переписку
            let conversation = userConversations.find(c => c.tutorId === tutorId);
            if (!conversation) {
                conversation = {
                    tutorId: tutorId,
                    messages: [
                        {
                            text: 'Здравствуйте! Чем могу вам помочь?',
                            sender: 'tutor',
                            timestamp: new Date().getTime()
                        }
                    ]
                };
                userConversations.push(conversation);
                localStorage.setItem('userConversations', JSON.stringify(userConversations));
            }
            
            document.getElementById('chatTutorName').textContent = `Чат с ${tutor.name}`;
            document.getElementById('chatModal').style.display = 'flex';
            
            // Очистка предыдущих сообщений и загрузка текущих
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '';
            
            conversation.messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${message.sender === 'tutor' ? 'received' : 'sent'}`;
                messageElement.textContent = message.text;
                messagesContainer.appendChild(messageElement);
            });
            
            // Прокрутка к последнему сообщению
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Фокус на поле ввода
            document.getElementById('chatInput').focus();
            
            // Сохраняем текущий tutorId для отправки сообщений
            document.getElementById('chatInput').setAttribute('data-tutor-id', tutorId);
        }

        // Навигация между страницами
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Убираем активный класс у всех ссылок
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Добавляем активный класс текущей ссылке
                    this.classList.add('active');
                    
                    // Скрываем все страницы
                    pages.forEach(page => page.classList.remove('page-active'));
                    
                    // Показываем выбранную страницу
                    const pageId = this.getAttribute('data-page');
                    document.getElementById(pageId).classList.add('page-active');
                });
            });
            
            // Кнопки "Назад к репетиторам"
            const backButtons = document.querySelectorAll('[data-page="main"]');
            backButtons.forEach(button => {
                button.addEventListener('click', function() {
                    switchPage('main');
                });
            });
            
            // Логотип ведет на главную
            document.getElementById('mainLogo').addEventListener('click', function(e) {
                e.preventDefault();
                switchPage('main');
            });
        }

        // Инициализация главной страницы
        function initMainPage() {
            // Отображение репетиторов
            displayTutors(tutors);
            
            // Поиск репетиторов
            document.getElementById('searchButton').addEventListener('click', searchTutors);
            document.getElementById('globalSearch').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchTutors();
                }
            });
            
            // Фильтрация репетиторов
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            document.getElementById('resetSearch').addEventListener('click', resetSearch);
            
            // Переключение вида
            const viewButtons = document.querySelectorAll('.view-btn');
            viewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    viewButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const view = this.getAttribute('data-view');
                    if (view === 'list') {
                        document.getElementById('listView').style.display = 'block';
                        document.getElementById('analyticsView').style.display = 'none';
                    } else {
                        document.getElementById('listView').style.display = 'none';
                        document.getElementById('analyticsView').style.display = 'block';
                    }
                });
            });
        }

        // Инициализация страницы сравнения
        function initComparisonPage() {
            // Заполняем выпадающие списки репетиторами
            const tutorSelects = [
                document.getElementById('compareTutor1'),
                document.getElementById('compareTutor2'),
                document.getElementById('compareTutor3')
            ];
            
            tutorSelects.forEach(select => {
                tutors.forEach(tutor => {
                    const option = document.createElement('option');
                    option.value = tutor.id;
                    option.textContent = tutor.name;
                    select.appendChild(option);
                });
            });
            
            // Обработчик кнопки сравнения
            document.getElementById('compareButton').addEventListener('click', compareTutors);
        }

        // Инициализация страницы профиля
        function initProfilePage() {
            // Переключение вкладок профиля
            const profileTabs = document.querySelectorAll('.profile-tab');
            profileTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchProfileTab(tabName);
                });
            });
            
            // Сохранение профиля
            document.getElementById('profileForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('profileName').value;
                const email = document.getElementById('profileEmail').value;
                const phone = document.getElementById('profilePhone').value;
                const bio = document.getElementById('profileBio').value;
                
                userProfile = { ...userProfile, name, email, phone, bio };
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
                
                // Обновляем текущего пользователя
                const currentUser = getCurrentUser();
                if (currentUser) {
                    currentUser.name = name;
                    currentUser.email = email;
                    localStorage.setItem('tutorFinderCurrentUser', JSON.stringify(currentUser));
                    
                    // Обновляем список пользователей
                    const users = JSON.parse(localStorage.getItem('tutorFinderUsers')) || [];
                    const userIndex = users.findIndex(u => u.id === currentUser.id);
                    if (userIndex !== -1) {
                        users[userIndex] = currentUser;
                        localStorage.setItem('tutorFinderUsers', JSON.stringify(users));
                    }
                }
                
                // Обновляем интерфейс
                updateAuthUI();
                updateProfilePage();
                
                showNotification('Профиль успешно обновлен', 'success');
            });
            
            // Смена пароля
            document.getElementById('passwordForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmNewPassword = document.getElementById('confirmNewPassword').value;
                
                if (!currentPassword || !newPassword || !confirmNewPassword) {
                    showNotification('Заполните все поля', 'error');
                    return;
                }
                
                if (newPassword !== confirmNewPassword) {
                    showNotification('Новые пароли не совпадают', 'error');
                    return;
                }
                
                if (!validatePassword(newPassword)) {
                    showNotification('Пароль должен содержать минимум 6 символов', 'error');
                    return;
                }
                
                const currentUser = getCurrentUser();
                if (currentUser.password !== currentPassword) {
                    showNotification('Текущий пароль неверен', 'error');
                    return;
                }
                
                // Обновляем пароль
                currentUser.password = newPassword;
                localStorage.setItem('tutorFinderCurrentUser', JSON.stringify(currentUser));
                
                // Обновляем в списке пользователей
                const users = JSON.parse(localStorage.getItem('tutorFinderUsers')) || [];
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('tutorFinderUsers', JSON.stringify(users));
                }
                
                document.getElementById('passwordForm').reset();
                showNotification('Пароль успешно изменен', 'success');
            });
        }

        // Инициализация модальных окон
        function initModals() {
            // Модальное окно авторизации/регистрации
            const authModal = document.getElementById('authModal');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const closeModal = document.getElementById('closeModal');
            const modalTabs = document.querySelectorAll('.modal-tab');
            const modalForms = document.querySelectorAll('.modal-form');
            
            // Открытие модального окна
            loginBtn.addEventListener('click', function(e) {
                e.preventDefault();
                authModal.style.display = 'flex';
                switchTab('login');
            });
            
            registerBtn.addEventListener('click', function(e) {
                e.preventDefault();
                authModal.style.display = 'flex';
                switchTab('register');
            });
            
            // Закрытие модального окна
            closeModal.addEventListener('click', function() {
                authModal.style.display = 'none';
            });
            
            // Переключение между вкладками
            modalTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
            
            // Обработка форм
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value.trim();
                const password = document.getElementById('loginPassword').value;
                
                if (!validateEmail(email)) {
                    showNotification('Введите корректный email', 'error');
                    return;
                }
                
                const result = loginUser(email, password);
                if (result.success) {
                    updateAuthUI();
                    document.getElementById('authModal').style.display = 'none';
                    showNotification('Вы успешно вошли в систему!', 'success');
                } else {
                    showNotification(result.message, 'error');
                }
            });
            
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('registerName').value.trim();
                const email = document.getElementById('registerEmail').value.trim();
                const role = document.getElementById('registerRole').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                // Валидация
                if (!name) {
                    showNotification('Введите имя', 'error');
                    return;
                }
                
                if (!validateEmail(email)) {
                    showNotification('Введите корректный email', 'error');
                    return;
                }
                
                if (!validatePassword(password)) {
                    showNotification('Пароль должен содержать минимум 6 символов', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('Пароли не совпадают', 'error');
                    return;
                }
                
                const result = registerUser(name, email, password, role);
                if (result.success) {
                    updateAuthUI();
                    document.getElementById('authModal').style.display = 'none';
                    showNotification('Регистрация прошла успешно!', 'success');
                } else {
                    showNotification(result.message, 'error');
                }
            });
            
            // Модальное окно чата
            const chatModal = document.getElementById('chatModal');
            const closeChat = document.getElementById('closeChat');
            const sendMessage = document.getElementById('sendMessage');
            const chatInput = document.getElementById('chatInput');
            
            closeChat.addEventListener('click', function() {
                chatModal.style.display = 'none';
            });
            
            sendMessage.addEventListener('click', function() {
                const message = chatInput.value.trim();
                const tutorId = chatInput.getAttribute('data-tutor-id');
                
                if (message && tutorId) {
                    // Находим переписку
                    const conversation = userConversations.find(c => c.tutorId == tutorId);
                    if (conversation) {
                        // Добавляем сообщение
                        conversation.messages.push({
                            text: message,
                            sender: 'user',
                            timestamp: new Date().getTime()
                        });
                        
                        // Сохраняем
                        localStorage.setItem('userConversations', JSON.stringify(userConversations));
                        
                        // Обновляем чат
                        const messagesContainer = document.getElementById('chatMessages');
                        const newMessage = document.createElement('div');
                        newMessage.className = 'message sent';
                        newMessage.textContent = message;
                        messagesContainer.appendChild(newMessage);
                        chatInput.value = '';
                        
                        // Прокрутка к последнему сообщению
                        messagesContainer.scrollTop = messagesContainer.scrollHeight;
                        
                        // Обновляем список переписок в профиле
                        updateConversationsList();
                        
                        // Имитация ответа репетитора
                        setTimeout(() => {
                            const reply = document.createElement('div');
                            reply.className = 'message received';
                            reply.textContent = 'Спасибо за ваше сообщение! Я свяжусь с вами в ближайшее время.';
                            messagesContainer.appendChild(reply);
                            messagesContainer.scrollTop = messagesContainer.scrollHeight;
                            
                            // Сохраняем ответ
                            conversation.messages.push({
                                text: 'Спасибо за ваше сообщение! Я свяжусь с вами в ближайшее время.',
                                sender: 'tutor',
                                timestamp: new Date().getTime()
                            });
                            
                            localStorage.setItem('userConversations', JSON.stringify(userConversations));
                            updateConversationsList();
                        }, 1000);
                    }
                }
            });
            
            chatInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    sendMessage.click();
                }
            });
            
            // Модальное окно результатов поиска
            const searchResultsModal = document.getElementById('searchResultsModal');
            const closeSearchResults = document.getElementById('closeSearchResults');
            
            closeSearchResults.addEventListener('click', function() {
                searchResultsModal.style.display = 'none';
            });
            
            // Закрытие модальных окон при клике вне их
            window.addEventListener('click', function(e) {
                if (e.target === authModal) {
                    authModal.style.display = 'none';
                }
                if (e.target === chatModal) {
                    chatModal.style.display = 'none';
                }
                if (e.target === searchResultsModal) {
                    searchResultsModal.style.display = 'none';
                }
                if (e.target === document.getElementById('schoolModal')) {
                    document.getElementById('schoolModal').style.display = 'none';
                }
                if (e.target === document.getElementById('bookingModal')) {
                    document.getElementById('bookingModal').style.display = 'none';
                }
                if (e.target === document.getElementById('reviewsModal')) {
                    document.getElementById('reviewsModal').style.display = 'none';
                }
            });
            
            // Кнопки "Стать репетитором"
            document.getElementById('becomeTutorBtn').addEventListener('click', function() {
                document.getElementById('authModal').style.display = 'flex';
                switchTab('register');
                document.getElementById('registerRole').value = 'tutor';
            });
            
            document.getElementById('becomeTutorBtn2').addEventListener('click', function() {
                document.getElementById('authModal').style.display = 'flex';
                switchTab('register');
                document.getElementById('registerRole').value = 'tutor';
            });
            
            // Форма обратной связи
            document.getElementById('feedbackForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('Сообщение отправлено! Мы свяжемся с вами в ближайшее время.', 'success');
                this.reset();
            });

            // Модальное окно отзывов
            document.getElementById('closeReviews').addEventListener('click', function() {
                document.getElementById('reviewsModal').style.display = 'none';
            });
        }

        // Функции для работы со школами
        const SCHOOLS = [
            'Республиканский лицей-интернат имени А.Е. Кулаковского',
            'Якутский городской лицей №1',
            'Физико-технический лицей имени В.П. Ларионова',
            'Городская классическая гимназия',
            'Международная арктическая школа',
            'Средняя общеобразовательная школа №17',
            'Средняя общеобразовательная школа №5 имени Н.О. Кривошапкина',
            'Средняя общеобразовательная школа №31',
            'Национальная политехническая школа №2',
            'Средняя общеобразовательная школа №26 (углубл.)',
            'Средняя общеобразовательная школа №33 им. Л.А. Колосовой',
            'Якутская городская национальная гимназия имени А.Г. и Н.К. Чиряевых',
            'Средняя общеобразовательная школа №1',
            'Национальная гимназия «Айыы Кыhата»',
            'Саха политехнический лицей',
            'Средняя общеобразовательная школа №24 им. С.И. Климакова',
            'Средняя общеобразовательная школа №21',
            'Средняя общеобразовательная школа №20 им. Ф.К. Попова',
            'Средняя общеобразовательная школа №6',
            'Средняя общеобразовательная школа №19'
        ];

        // Данные случайных репетиторов для каждой школы
        const RANDOM_TUTORS = {
            names: [
                "Александр Петров", "Мария Иванова", "Дмитрий Сидоров", "Елена Кузнецова", "Анна Васильева",
                "Сергей Николаев", "Ольга Михайлова", "Иван Федоров", "Наталья Алексеева", "Павел Семенов",
                "Татьяна Павлова", "Андрей Григорьев", "Юлия Романова", "Владимир Кириллов", "Екатерина Максимова",
                "Артем Орлов", "Светлана Лебедева", "Михаил Захаров", "Алина Морозова", "Константин Виноградов"
            ],
            subjects: [
                ["Математика", "Физика"],
                ["Русский язык", "Литература"],
                ["Английский язык"],
                ["Химия", "Биология"],
                ["История", "Обществознание"],
                ["Программирование", "Информатика"],
                ["География", "Экология"],
                ["Французский язык", "Лингвистика"]
            ],
            types: ["online", "offline", "both"]
        };

        // Данные отзывов
        const REVIEWS_DATA = [
            {
                id: 1,
                tutorId: 1,
                author: "Мария Семенова",
                rating: 5,
                date: "2024-01-15",
                text: "Анна Сергеевна - прекрасный преподаватель! Занимаемся с ней уже полгода, и мой сын значительно улучшил успеваемость по математике. Объясняет очень доступно и понятно."
            },
            {
                id: 2,
                tutorId: 1,
                author: "Иван Козлов",
                rating: 4,
                date: "2024-01-10",
                text: "Хороший репетитор, помог подготовиться к ЕГЭ. Немного строгая, но это даже плюс - дисциплинирует."
            },
            {
                id: 3,
                tutorId: 2,
                author: "Алексей Новиков",
                rating: 5,
                date: "2024-01-20",
                text: "Дмитрий Игоревич - профессионал своего дела! Научил меня программировать на Python с нуля. Теперь работаю джуном в IT-компании."
            },
            {
                id: 4,
                tutorId: 3,
                author: "Ольга Петрова",
                rating: 5,
                date: "2024-01-18",
                text: "Елена Владимировна помогла мне подготовиться к IELTS. Сдала на 7.5 баллов! Очень благодарна за качественную подготовку."
            },
            {
                id: 5,
                tutorId: 4,
                author: "Денис Сидоров",
                rating: 4,
                date: "2024-01-12",
                text: "Алексей Петрович отлично объясняет сложные темы по химии. Занимаемся подготовкой к олимпиаде, уже есть первые успехи."
            }
        ];

        function generateRandomTutorsForSchool(schoolId) {
            const tutorCount = 3 + Math.floor(Math.random() * 4); // 3-6 репетиторов
            const tutors = [];
            
            for (let i = 0; i < tutorCount; i++) {
                const name = RANDOM_TUTORS.names[Math.floor(Math.random() * RANDOM_TUTORS.names.length)];
                const subjects = RANDOM_TUTORS.subjects[Math.floor(Math.random() * RANDOM_TUTORS.subjects.length)];
                const type = RANDOM_TUTORS.types[Math.floor(Math.random() * RANDOM_TUTORS.types.length)];
                const rating = (4 + Math.random()).toFixed(1);
                const experience = 1 + Math.floor(Math.random() * 10);
                const price = 500 + Math.floor(Math.random() * 1500);
                const phone = `+7 (914) ${Math.floor(100 + Math.random() * 900)}-${Math.floor(10 + Math.random() * 90)}-${Math.floor(10 + Math.random() * 90)}`;
                const email = `tutor${schoolId}_${i+1}@school${schoolId}.ru`;
                
                tutors.push({
                    id: schoolId * 100 + i,
                    name,
                    subjects,
                    type,
                    rating: parseFloat(rating),
                    experience,
                    price,
                    phone,
                    email,
                    schoolId
                });
            }
            
            return tutors;
        }

        function showSchoolPage(n){
            document.querySelectorAll('.schools-page').forEach((p,i)=>p.style.display=(i===n-1?'block':'none'));
        }

        function populateSchoolsSelect(select){
            select.innerHTML='<option value="">-- Выберите школу --</option>';
            SCHOOLS.forEach((s,i)=>{
                const opt=document.createElement('option');
                opt.value=i+1;
                opt.textContent=s;
                select.appendChild(opt);
            });
        }

        function openSchoolModal(id){
            const title=document.getElementById('schoolModalTitle');
            const list=document.getElementById('schoolTutorsList');
            title.textContent=SCHOOLS[id-1];
            list.innerHTML='<div style="padding:20px;color:var(--text-light);">Загрузка репетиторов...</div>';
            document.getElementById('schoolModal').style.display='flex';
            
            // Генерируем случайных репетиторов для школы
            const schoolTutors = generateRandomTutorsForSchool(id);
            
            if(!schoolTutors.length){
                list.innerHTML='<div style="text-align:center;padding:25px;color:var(--text-light);">Пока никто не зарегистрировался как репетитор из этой школы.</div>';
                return;
            }
            
            list.innerHTML='';
            schoolTutors.forEach(t=>{
                const stars = generateStars(t.rating);
                const div=document.createElement('div');
                div.className='school-tutor-card';
                div.innerHTML=`
                    <div class="school-tutor-header">
                        <div class="school-tutor-info">
                            <div class="school-tutor-name">${t.name}</div>
                            <div class="school-tutor-subjects">
                                <i class="fas fa-book"></i>
                                ${t.subjects.join(', ')}
                            </div>
                            <div class="school-tutor-stats">
                                <div class="school-tutor-stat">
                                    <i class="fas fa-star" style="color: var(--accent-color);"></i>
                                    ${t.rating} (${stars})
                                </div>
                                <div class="school-tutor-stat">
                                    <i class="fas fa-clock"></i>
                                    ${t.experience} лет опыта
                                </div>
                                <div class="school-tutor-stat">
                                    <i class="fas fa-wallet"></i>
                                    ${t.price} руб/час
                                </div>
                                <div class="school-tutor-stat">
                                    <i class="fas fa-${t.type === 'online' ? 'laptop' : t.type === 'offline' ? 'map-marker-alt' : 'globe'}"></i>
                                    ${getTypeText(t.type)}
                                </div>
                            </div>
                            <div class="school-tutor-contacts">
                                <div class="contact-info">
                                    <i class="fas fa-phone" style="color: var(--primary-color);"></i>
                                    ${t.phone}
                                </div>
                                <div class="contact-info">
                                    <i class="fas fa-envelope" style="color: var(--primary-color);"></i>
                                    ${t.email}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tutor-actions-group">
                        <button class="btn btn-primary btn-sm" onclick="applyToTutor(${t.id}, '${t.name}')">
                            <i class="fas fa-calendar-check"></i>
                            Записаться
                        </button>
                        <button class="btn btn-outline btn-sm" onclick="showReviews(${t.id}, '${t.name}')">
                            <i class="fas fa-comment"></i>
                            Отзывы
                        </button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function applyToTutor(id, name){
            const cur=JSON.parse(localStorage.getItem('tutorFinderCurrentUser'));
            if(!cur){
                document.getElementById('authModal').style.display='flex';
                return;
            }
            
            // Сохраняем выбранного репетитора для модального окна
            selectedTutor = {
                id: id,
                name: name
            };
            
            // Открываем модальное окно выбора даты
            document.getElementById('bookingModal').style.display='flex';
        }

        // Функция для показа отзывов
        function showReviews(tutorId, tutorName) {
            const reviewsModal = document.getElementById('reviewsModal');
            const reviewsTitle = document.getElementById('reviewsModalTitle');
            const reviewsList = document.getElementById('reviewsList');
            
            reviewsTitle.textContent = `Отзывы о ${tutorName}`;
            
            // Находим отзывы для этого репетитора
            const tutorReviews = REVIEWS_DATA.filter(review => review.tutorId === tutorId);
            
            if (tutorReviews.length === 0) {
                reviewsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-light);">
                        <i class="fas fa-comment-slash" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <p>Пока нет отзывов об этом репетиторе</p>
                        <p>Станьте первым, кто оставит отзыв!</p>
                    </div>
                `;
            } else {
                reviewsList.innerHTML = '';
                tutorReviews.forEach(review => {
                    const reviewStars = generateStars(review.rating);
                    const reviewItem = document.createElement('div');
                    reviewItem.className = 'review-item';
                    reviewItem.innerHTML = `
                        <div class="review-header">
                            <div class="review-author">${review.author}</div>
                            <div class="review-date">${review.date}</div>
                        </div>
                        <div class="review-rating">${reviewStars}</div>
                        <div class="review-text">${review.text}</div>
                    `;
                    reviewsList.appendChild(reviewItem);
                });
            }
            
            reviewsModal.style.display = 'flex';
        }

        // Функции для работы с модальным окном записи
        document.getElementById('closeBooking').onclick = () => {
            document.getElementById('bookingModal').style.display = 'none';
        };

        document.getElementById('confirmBooking').onclick = () => {
            const dateInput = document.getElementById('lessonDate');
            if (!dateInput.value) {
                alert('Выберите дату занятия');
                return;
            }
            
            const date = new Date(dateInput.value).toLocaleDateString('ru-RU');
            
            // Сохраняем в ОБЕИХ системах для совместимости
            
            // 1. В новой системе (для модального окна записи)
            const record = { 
                name: selectedTutor.name, 
                date: date,
                id: selectedTutor.id
            };
            saveTutorRecord(record);
            
            // 2. В старой системе (для профиля)
            let userTutors = JSON.parse(localStorage.getItem('userTutors') || '[]');
            if (!userTutors.includes(selectedTutor.id)) {
                userTutors.push(selectedTutor.id);
                localStorage.setItem('userTutors', JSON.stringify(userTutors));
            }
            
            // Обновляем отображение
            updateMyTutorsList();
            
            dateInput.value = '';
            document.getElementById('bookingModal').style.display = 'none';
            showNotification(`Вы записались к ${selectedTutor.name} на ${date}`, 'success');
        };

        // сохранить запись в localStorage
        function saveTutorRecord(record) {
            const data = JSON.parse(localStorage.getItem('myTutors') || '[]');
            data.push(record);
            localStorage.setItem('myTutors', JSON.stringify(data));
        }

        // удалить запись
        function removeTutor(index) {
            const data = JSON.parse(localStorage.getItem('myTutors') || '[]');
            data.splice(index, 1);
            localStorage.setItem('myTutors', JSON.stringify(data));
            updateMyTutorsList();
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация навигации
            initNavigation();
            
            // Инициализация главной страницы
            initMainPage();
            
            // Инициализация страницы сравнения
            initComparisonPage();
            
            // Инициализация страницы профиля
            initProfilePage();
            
            // Инициализация модальных окон
            initModals();
            
            // Инициализация школ
            const regRole=document.getElementById('registerRole');
            const regGroup=document.getElementById('registerSchoolGroup');
            if(regRole){
                regRole.addEventListener('change',()=>{regGroup.style.display=(regRole.value==='tutor'?'block':'none');});
            }
            const rs=document.getElementById('registerSchool'); if(rs) populateSchoolsSelect(rs);
            const ps=document.getElementById('profileSchool'); if(ps) populateSchoolsSelect(ps);
            const close=document.getElementById('closeSchoolModal'); if(close) close.onclick=()=>document.getElementById('schoolModal').style.display='none';
            
            // Проверяем авторизацию при загрузке страницы
            updateAuthUI();
        });
    </script>
</body>
</html>